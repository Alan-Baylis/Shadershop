highlightColor = #09c
plotBackgroundColor = #FAF8F2

PlusButtonSize = 18px

DisclosureTriangleSize = 12px
SpacingSize = 6px
ThumbnailSize = 36px

pointControlSize = 12px

ShaderOverlayZIndex = 10
PointControlZIndex = 20





inline(va)
  display inline-block
  vertical-align va

shadow(size, opacity)
  box-shadow 0px size 2*size rgba(0, 0, 0, opacity)


// ============================================================================
// Generic
// ============================================================================

html, body
  margin 0

[contenteditable]:active, [contenteditable]:focus, button:active, button:focus
  outline none

body
  font-family "Lucida Sans Unicode", "Lucida Grande", sans-serif
  font-size 12px

canvas, .Shader
  position absolute
  top 0
  left 0
  width 100%
  height 100%


// Kill scrollbars in webkit...
::-webkit-scrollbar {
    width: 0px;
    height: 0px;
}






// ============================================================================
// Main Layout
// ============================================================================

.ShaderOverlay
  z-index ShaderOverlayZIndex
  pointer-events none

.Definitions
  position absolute
  top 0px
  left 0px
  width 96px
  height 100vh
  overflow-x hidden
  overflow-y auto

.MainPlot
  position absolute
  top 0px
  left 96px
  bottom 0px
  right 300px

.Outline
  position absolute
  top 30px
  right 30px
  width 240px
  bottom 30px


// ============================================================================
// Dragging
// ============================================================================

.DraggingObject
  position: fixed
  z-index: 100;
  pointer-events: none;
  opacity 0.5
  box-shadow: 0px 2px 6px rgba(0,0,0,0.5);

.DraggingOverlay
  position: fixed
  top: 0; left: 0; bottom: 0; right: 0;
  z-index: 200


// ============================================================================
// Definitions
// ============================================================================

.Definition
  margin 12px

  .PlotContainer
    position relative
    box-sizing border-box
    width 72px
    height 72px
    shadow 1px 0.2

  &.Selected
    .PlotContainer
      outline 1px solid highlightColor
      shadow 1px 0.5

  .Label
    width 72px
    margin-top 4px
    text-align center

.Divider
  border-bottom 1px solid #eee

.AddDefinition
  margin 12px
  width 72px
  text-align center


// ============================================================================
// Main Plot
// ============================================================================

.PlotContainer
  position absolute
  top 0
  left 0
  width 100%
  height 100%
  background-color plotBackgroundColor
  overflow hidden

.PointControl
  position absolute
  width pointControlSize
  height pointControlSize
  margin-left -0.5 * pointControlSize
  margin-top -0.5 * pointControlSize
  border-radius 0.5 * pointControlSize
  background-color highlightColor
  opacity 0.25
  z-index PointControlZIndex
  &:hover
    opacity 1


// ============================================================================
// Outline
// ============================================================================

.Outline > .OutlineChildren
  margin-left 0px

.OutlineItem
  &.Invisible
    opacity 0.25

.OutlineRow
  position relative
  &.Hovered
    background-color tint(highlightColor, 95%)
  &.Selected
    background-color tint(highlightColor, 85%)

.OutlineVisible
  position absolute
  right 9px
  line-height ThumbnailSize + SpacingSize
  color #999
  opacity 0
.OutlineRow:hover
  .OutlineVisible
    opacity 1

.OutlineChildren
  margin-left DisclosureTriangleSize + SpacingSize*2

.OutlineDisclosure
  inline middle
  padding SpacingSize

.OutlineInternals
  inline middle
  margin 3px 6px

.OutlineThumbnail
  position relative
  inline middle
  width ThumbnailSize
  height ThumbnailSize
  margin 2px
  border 1px solid #eee


.OutlineLabel
  inline middle
  // Give text editing cursor some room
  min-width 30px
  padding-right 10px

.Placeholder
  background-color #bbb
  box-shadow inset 0px 1px 3px rgba(0,0,0,0.5)

.Variable
  padding 2px 6px
  text-align center

.DisclosureTriangle
  width 0
  height 0
  margin 0px 0.067*DisclosureTriangleSize
  border-top: 0.5*DisclosureTriangleSize solid transparent
  border-bottom: 0.5*DisclosureTriangleSize solid transparent
  border-left: 0.866*DisclosureTriangleSize solid #ddd
  transition -webkit-transform 0.05s
  &.Expanded
    -webkit-transform: rotate(90deg)
  &.Hidden
    // visibility hidden
    display none

// ============================================================================
// Buttons
// ============================================================================

.TextButton
  cursor pointer
  font-size 10px
  &:hover
    color highlightColor

.AddButton
  width PlusButtonSize
  height PlusButtonSize
  padding 0
  line-height PlusButtonSize
  font-size 9px
  color #777
  font-family verdana
  font-weight bold
  text-shadow 0 1px 0 rgba(255,255,255,0.5)
  background-color #ddd
  background-image linear-gradient(to bottom, #eee, #ccc)
  box-shadow 0 2px 1px rgba(0,0,0,0.16), 0 0 1px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.55)
  border-radius 20px
  border 0px
  &:before
    content "+"
  &:hover
    background-image linear-gradient(to bottom, #f3f3f3, #d3d3d3)
  &:active
    background-image linear-gradient(to bottom, #cacaca, #d5d5d5)
    box-shadow 0 1px 1px rgba(255,255,255,0.35), inset 0 0 1px rgba(0,0,0,0.5), inset 0 1px 4px rgba(0,0,0,0.4)


